<ng-container *ngIf="!isLoading">
  <mat-card *ngIf="student; else noStudent">
    <mat-card-header>
      <student-info [student]="student"></student-info>
    </mat-card-header>

    <mat-action-list>
      <button
        *ngIf="!noteUpdating; else noteUpdatingTemplates"
        mat-stroked-button
        (click)="updateNote()"
      >
        {{ 'STUDENT.ST_ACTION_1' | translate }}
      </button>
      <button mat-stroked-button color="accent" (click)="onEditClick()">
        {{ 'STUDENT.ST_ACTION_2' | translate }}
      </button>
      <button mat-stroked-button color="warn" (click)="onDeleteClick()">
        {{ 'STUDENT.ST_ACTION_3' | translate }}
      </button>
    </mat-action-list>

    <mat-card-content>
      <mat-form-field appearance="outline">
        <mat-label>{{ 'STUDENT.NOTE_LABEL' | translate }}</mat-label>
        <textarea matInput [(ngModel)]="student.notes"></textarea>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card class="receipts" *ngIf="student && student.receipts">
    <student-receipts [receipts]="student.receipts" [owner]="student"></student-receipts>
  </mat-card>

  <ng-template #noStudent>
    <mat-card class="noStudent">
      <mat-card-header>
        <mat-card-title>{{ 'STUDENT.NO_ST_TITLE' | translate }}</mat-card-title>
        <mat-card-subtitle style="margin-top: 2em">
          {{ 'STUDENT.NO_ST_CONTENT' | translate }}
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>
  </ng-template>
</ng-container>

<ng-template #noteUpdatingTemplates>
  <div [ngSwitch]="noteUpdating">
    <div class="note-update-container" *ngSwitchCase="'updating'">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>
    <div class="note-update-container" *ngSwitchCase="'fail'">
      <span>{{ 'STUDENT.NOTE_UP_SUCC' | translate }}</span>
      <mat-icon color="warn">warning</mat-icon>
    </div>
    <div class="note-update-container" *ngSwitchCase="'success'">
      <span>{{ 'STUDENT.NOTE_UP_SUCC' | translate }}</span>
      <mat-icon color="accent">done</mat-icon>
    </div>
  </div>
</ng-template>

<mat-spinner *ngIf="isLoading"></mat-spinner>
